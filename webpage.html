    <html>
      <head>
        <title>ESP8266 Demo</title>
        <link rel=\"icon\" href=\"data:,\">
        <style>
          body {background-color:#2c2c34; font-family:Arial, Helvetica, Sans-Serif; Color:#519cd4; text-align:center}
        </style>
      </head>
      <body>
		
		<div><p id="ax"></p></div>
		<div><p id="ay"></p></div>
		<div><p id="az"></p></div>
		
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <div id="chart_div"></div>
		
        <div><p>
          <form method="post" action="http://192.168.0.104:80/req/post">
            <p>Buttons on POST form</p>
            <button name="Led" value="ON">Turn On</button>
            <button name="Led" value="OFF">Turn Off</button>
          </form>
        </p></div>
        <div>
          <p>Measurements Control Panel</p>
          <p>
            <form method="post" action="http://192.168.0.104:80/req/post">
              <button name="Msrmnt" value="ON" onclick="online()">Start Measurements</button>
              <button name="Msrmnt" value="OFF" onclick="offline()">Stop Measurements</button>
            </form>
			<script>
				var live = false;
				function online(){live = true;}
				function offline(){live = false; forceDownloadDataFile();}
			</script>
          </p>
          <p>
            <form method="get" action="http://192.168.0.104:80/req/get">
              <button name="Download" value="/SensorData.txt">Download SensorData.txt button</button>
            </form>
          </p>
        </div>
    <script>
		google.charts.load('current', {packages: ['corechart', 'line']});
		
		var queue = [];
		var virtualFile = "";
		var chart;
		
		function forceDownloadDataFile() {
			const a = document.createElement('a');
			a.download = 'data.csv';
			a.href = URL.createObjectURL(new Blob ([virtualFile], {type : 'text/plain'}));
			a.click();
			
			virtualFile = "";
		}
		
		setInterval(function() {
			if(!live) {
				return;
			}
			getMeasurement(); 
			drawAxisTickColors();
			if (virtualFile.length > 64*1024*1024) {
				forceDownloadDataFile();
			}
		}, 100);
		
		
		function drawAxisTickColors() {
			if(chart){
				chart.clearChart();
			}
			
			var data = new google.visualization.DataTable();
			data.addColumn('number', 'X');
			data.addColumn('number', 'ax');
			data.addColumn('number', 'ay');
			data.addColumn('number', 'az');
			
			for(const [key, value] of queue.entries()) {
				data.addRow([key, value[0], value[1], value[2]]);
			}
			var options = {
				hAxis: {
					title: 'Time'
				},
				vAxis: {
					title: 'Acceleration'
				},
				colors: ['#a52714', '#14a527', '#2714a5']
			};
			chart = new google.visualization.LineChart(document.getElementById('chart_div'));
			chart.draw(data, options);
		};
		
		
		async function getMeasurement() {
			const response = await fetch('http://192.168.0.104:80/msrmnt' 
			/*	
				,{
					method: 'GET', //POST
					mode: 'no-cors', 
					//credentials: 'same-origin'
					headers: {'content-type': 'text/csv'}
				}
			*/
			);
			const text = await response.text();
			if (response.ok) {
				virtualFile += text + '\n';
				
				const arr = text.split(';');
				
				for(const line of arr) {
					if(!line) continue;
					queue.push(line.split(',').map(Number));
				}
				
				while (queue.length > 1000) {
					queue.shift();
				}
			}
			else {
				console.log('keks');
			}
		}
    </script>
    </body>
  </html>