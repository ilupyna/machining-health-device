    <html>
      <head>
        <title>ESP8266 Demo</title>
        <link rel=\"icon\" href=\"data:,\">
        <style>
          body {background-color:#2c2c34; font-family:Arial, Helvetica, Sans-Serif; Color:#519cd4; text-align:center}
        </style>
      </head>
      <body>
		
		<div><p id="ax"></p></div>
		<div><p id="ay"></p></div>
		<div><p id="az"></p></div>
		
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <div id="chart_div"></div>
		
        <div><p>
          <form method="post" action="http://192.168.0.101:80/req/post">
            <p>Buttons on POST form</p>
            <button name="Led" value="ON">Turn On</button>
            <button name="Led" value="OFF">Turn Off</button>
          </form>
        </p></div>
        <div>
          <p>Measurements Control Panel</p>
          <p>
            <form method="post" action="http://192.168.0.101:80/req/post">
              <button name="Msrmnt" value="ON" onclick="online()">Start Measurements</button>
              <button name="Msrmnt" value="OFF" onclick="offline()">Stop Measurements</button>
            </form>
			<script>
				var live = false;
				function online(){live = true;}
				function offline(){live = false; forceSaveDataFile();}
			</script>
          </p>
          <p>
            <form method="get" action="http://192.168.0.101:80/req/get">
              <button name="Download" value="/SensorData.txt">Download SensorData.txt button</button>
            </form>
          </p>
        </div>
    <div><p>
		<button onclick="writeToFile()">Test write</button>
		<button onclick="closeNsave()">Test close</button>
		<script>
			let dirHandle;
			let fileHandle;
			let fileWritable;
			
			async function writeToFile() {
				try {
					if (!dirHandle) {
						const mainDirHandle = await window.showDirectoryPicker({
							startIn: 'downloads',
						});
						dirHandle = await mainDirHandle.getDirectoryHandle("Measurements", {create: true});
						fileHandle = await dirHandle.getFileHandle("test.txt", {create: true});
					}
					if (!fileWritable) {
						fileWritable = await fileHandle.createWritable({keepExistingData:true});
					}
					
					const size = (await fileHandle.getFile()).size;
					await fileWritable.write({
						type: "write",
						data: "keks",
						position: size 
					});
				}
				catch (err) {
					console.error(err.name, err.message);
					alert("fu");
				}
			}
			async function closeNsave() {
				if (fileWritable) {
					await fileWritable.close();
					fileWritable = null;
				}
			}
		</script>
	</p></div>
	
    <script>
		google.charts.load('current', {packages: ['corechart', 'line']});
		
		var queue  = [];
		
		setInterval(function() {
			if(!live) {
				return;
			}
			getMeasurement(); 
			drawAxisTickColors();
		}, 1000);
		
		function drawAxisTickColors() {
			var data = new google.visualization.DataTable();
			data.addColumn('number', 'X');
			data.addColumn('number', 'ax');
			data.addColumn('number', 'ay');
			data.addColumn('number', 'az');
			
			for(const [key, value] of queue.entries()) {
				data.addRow([key, value[0], value[1], value[2]]);
			}
			var options = {
				hAxis: {
					title: 'Time'
				},
				vAxis: {
					title: 'Acceleration'
				},
				colors: ['#a52714', '#14a527', '#2714a5']
			};
			var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
			chart.draw(data, options);
			
			//delete data;
			//delete chart;
		};
		
		
		function getMeasurement() {
			var xhttp = new XMLHttpRequest();
			
			//xhttp.responseType = "blob";
			xhttp.open("GET", "http://192.168.0.101:80/msrmnt", true);
			xhttp.send();
			
			xhttp.onload = function() {
				if (this.status == 200) {
					//var parser = new DOMParser();
					//var doc1 = parser.parseFromString(xmlString, "text/xml");
					
					var arr = this.response.split(';');
					for(const line of arr) {
						if(!line) continue;
						queue.push(line.split(',').map(Number));
					}
					
					while(queue.length > 1000) {
						queue.shift();
					}
				}
				else {
					console.log('keks');
				}
			};
			
			//delete xhttp;
		}
    </script>
    </body>
  </html>